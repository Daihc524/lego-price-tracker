steps:
  - name: Checkout repository
    uses: actions/checkout@v3
    with:
      persist-credentials: false

  - name: Commit and push prices.json
    run: |
      git config --global user.name "github-actions[bot]"
      git config --global user.email "action@github.com"
      git add prices.json
      git commit -m "Update prices" || echo "No changes to commit"
      git push https://x-access-token:${GITHUB_TOKEN}@github.com/${{ github.repository }} HEAD:main
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
